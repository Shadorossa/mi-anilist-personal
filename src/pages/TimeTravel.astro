---
const { data = [] } = Astro.props;
const maxCount = data.length > 0 ? Math.max(...data.map((d) => d.count)) : 1;
---

<div
    class="w-full bg-[#0a0a0c] border border-white/5 rounded-2xl p-6 flex items-end gap-2 h-64"
>
    {
        data.map((item) => (
            <div class="flex-1 flex flex-col items-center gap-2 group h-full">
                <div class="relative w-full h-full flex items-end">
                    <div
                        class="w-full bg-[var(--accent-color)]/20 group-hover:bg-[var(--accent-color)]/40 transition-all rounded-t-md"
                        style={`height: ${(item.count / maxCount) * 100}%;`}
                        title={`${item.count} obras`}
                    >
                        <span class="absolute -top-5 left-1/2 -translate-x-1/2 text-xs font-bold text-white opacity-0 group-hover:opacity-100 transition-opacity">
                            {item.count}
                        </span>
                    </div>
                </div>
                <span class="text-[10px] font-bold text-gray-500">
                    {item.year}
                </span>
            </div>
        ))
    }
</div>
