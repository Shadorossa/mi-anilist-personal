---
const { profile, bannerPath, avatarPath, stats } = Astro.props;
---

<style>
    .font-signature {
        font-family: "Dancing Script", cursive;
        font-weight: 700;
        text-shadow:
            0 0 8px rgba(255, 255, 255, 0.3),
            0 0 20px rgba(var(--accent-color-rgb), 0.2);
    }
</style>

<header class="relative w-full mb-12">
    <div class="h-96 w-full overflow-hidden relative">
        <img
            id="profile-banner-img"
            src={bannerPath}
            onerror="this.src='https://placehold.co/1500x500/111/333?text=Banner'"
            class="w-full h-full object-cover opacity-100"
        />
        <div
            class="absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent"
        >
        </div>
        <!-- El botÃ³n de Admin ha sido ocultado. El acceso ahora es directo por URL /admin -->
    </div>
    <!-- Avatar, Username, Bio container -->
    <div
        class="absolute bottom-0 left-0 right-0 w-full px-4 md:px-12 z-10 max-w-7xl mx-auto"
    >
        <div class="flex items-end gap-6">
            <!-- Avatar -->
            <div class="relative w-80 h-[29rem] md:w-[36rem] md:h-[34rem]">
                <img
                    src={avatarPath}
                    onerror="this.src='https://placehold.co/400x600?text=U'"
                    class="w-full h-full object-contain object-bottom drop-shadow-[0_10px_15px_rgba(0,0,0,0.4)]"
                />
            </div>
            <!-- Name and Bio -->
            <div class="pb-12 md:pb-16">
                <h1
                    class="font-signature text-6xl md:text-7xl text-white relative inline-block -rotate-2"
                >
                    {profile.username}
                </h1>
                <p class="text-gray-400 text-sm font-medium mt-2">
                    {profile.bio}
                </p>
            </div>
        </div>
        <!-- The line the character rests on -->
        <div class="h-px w-full bg-white/10 relative">
            <!-- Stats block integrated into the line -->
            <div
                class="absolute right-0 top-1/2 -translate-y-1/2 flex justify-end"
            >
                <div class="hidden md:block">
                    <div
                        class="bg-[#0a0a0c]/80 backdrop-blur-sm border border-white/5 rounded-xl px-5 py-2.5 shadow-lg"
                    >
                        <div
                            class="flex items-center gap-5 text-xs text-gray-500"
                        >
                            <div
                                class="flex items-center gap-2"
                                title="Total Obras"
                            >
                                <i
                                    class="fa-solid fa-book-open text-base text-gray-600"
                                ></i>
                                <strong class="font-black text-lg text-white"
                                    >{stats.total}</strong
                                >
                            </div>
                            <div class="w-px h-4 bg-white/10"></div>
                            <div
                                class="flex items-center gap-2"
                                title="Jugando"
                            >
                                <i
                                    class="fa-solid fa-gamepad text-base text-green-400/60"
                                ></i>
                                <strong
                                    class="font-black text-lg text-green-400"
                                    >{stats.playing}</strong
                                >
                            </div>
                            <div
                                class="flex items-center gap-2"
                                title="Terminado"
                            >
                                <i
                                    class="fa-solid fa-check-double text-base text-blue-400/60"
                                ></i>
                                <strong class="font-black text-lg text-blue-400"
                                    >{stats.completed}</strong
                                >
                            </div>
                            <div
                                class="flex items-center gap-2"
                                title="Pendiente"
                            >
                                <i
                                    class="fa-regular fa-clock text-base text-yellow-400/60"
                                ></i>
                                <strong
                                    class="font-black text-lg text-yellow-400"
                                    >{stats.pending}</strong
                                >
                            </div>
                            <div
                                class="flex items-center gap-2"
                                title="Droppeado"
                            >
                                <i
                                    class="fa-solid fa-ban text-base text-red-400/60"
                                ></i>
                                <strong class="font-black text-lg text-red-400"
                                    >{stats.dropped}</strong
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<script is:inline>
    document.addEventListener("scroll", () => {
        const banner = document.getElementById("profile-banner-img");
        if (banner) {
            const scrollY = window.scrollY;
            // Move the banner down at a fraction of the scroll speed to create a parallax effect
            banner.style.transform = `translateY(${scrollY * 0.4}px)`;
        }
    });
</script>
